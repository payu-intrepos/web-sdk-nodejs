verifyPayment
========================

The Verify Payment (verify_payment) API gives you the status of the transaction. PayU recommends using this API to reconcile with PayU’s database after you receive the response.

```javascript
const PayU = require("payu");

const payuClient = new PayU({
  key: <YOUR_MERCHANT_KEY>,
  salt: <YOUR_MERCHANT_SALT>,
},<ENVIRONMENT>);     // Possible value  = TEST/LIVE

payuClient.verifyPayment(<txnID>).then((res)=>{
    console.log(res)
}).catch((err)=>{
    console.log(err)
});
```

## Method Arguments


Argument | Data Type |  Description
------------ | ------------- | -------------
*txnID* | ```String``` | In this argument you can put all the transaction IDs, that is, txnid (your transaction ID/order ID) values separated by pipe. 


## Response Parameters

|Parameter|Description|Example|
|:----|:----|:----|
|status|This parameter returns the status of web service call. The status can 0 or 1:|1|
|msg|This parameter returns the reason string.|For example, Transaction not exists|
|transaction_details|This parameter contains the response in a JSON format. For more information refer to Description of transaction_details JSON Fields.This parameter may or may not be returned depending on the web service being called.|mihpayid,request_id, bank_ref_num etc|
|request_id|PayU Request ID for a request in a Transaction. For example, a transaction can have a refund request.|7800456|
|bank_ref_num|This parameter returns the bank reference number. If the bank provides after a successful action.|204519474956|


### Description of transaction_details JSON Fields
\
The response for the transaction_details parameter is in JSON format and the parameters in this JSON are described in the following table:

|JSON Field|Description|
|:----|:----|
|mihpayid|This field contains a unique reference number created for each transaction at PayU’s end. You must note this transaction ID as this will be used as a reference for all the future actions on this transaction like Inquiry or Refund.|
|request_id|This field would contain the request ID value posted by the merchant during the transaction request.|
|bankrefnum|For each successful transaction – this field would contain the bank reference number generated by the bank.|
|amt|This field contains the net amount debited from the customer’s account for this transaction.|
|transaction_amount|This field contains the original amount which was sent in the transaction request by the merchant|
|productinfo|This field contains the same value of product information which was sent in the transaction request from the merchant’s end to PayU.|
|firstname|This field contains the same value of first name which was sent in the transaction request from the merchant’s end to PayU.|
|bankcode|This field contains the code indicating the payment option used for the transaction. For example, in the Debit Card mode, there are different options like Visa Debit Card, Mastercard, Maestro etc. For each option, a unique bank code exists. It would be returned in this bank code parameter. For example, Visa Debit Card – VISA, Master Debit Card – MAST.|
|udf1|This field contains the same value of udf values that were sent in the transaction request from the merchant’s end to PayU. It ranges from udf1 to udf5.|
|udf3|This field contains the same value of udf values that were sent in the transaction request from the merchant’s end to PayU. It ranges from udf1 to udf5.|
|udf4|This field contains the same value of udf values that were sent in the transaction request from the merchant’s end to PayU. It ranges from udf1 to udf5.|
|udf5|This field contains the same value of udf values that were sent in the transaction request from the merchant’s end to PayU. It ranges from udf1 to udf5.|
|field2, field3|The auth code from bank is displayed in this field.|
|field9|This field contains the the failure reason if the transaction has failed.|
|error_code|This field contains the error code for the transaction.|
|net_amount_debit|This field contains the net amount debited from the customer’s account for this transaction. It is calculated as: `transaction_fee= actual_discount + additional_charges`|
|added_on|This field contains the transaction time stamp is returned in this parameter.|
|payment_source|This field contains the payment source. PayU is returned for the transactions made with PayU.|
|card_type|This field contains the card type used for the transaction if the cards are used.|
|error_Message|This field contains the error message for the transaction (if any).|
|net_amount_debit|This field contains the net amount debited from the customer’s account for this transaction.|
|disc|This field contains the discount amount for the customer.**Note**: For **Cashback** type offers, the discount amount will always be sent as **zero**(**0**) by PayU.|
|Mode|This field contains the mode of payment.|
|PG_TYPE|This field contains the information on the payment gateway used for the transaction. For example, if CC PG was used, it would contain the value CC-PG. Similarly, it would have a unique value for all different types of payment gateways.|
|card_no|This field contains the card number for card transactions.|
|name_on_card|This field contains the name on card for card transactions.|
|udf2|This field contains the same value of udf values that were sent in the transaction request from the merchant’s end to PayU. It ranges from udf1 to udf5.|
|field5|This field contains the UPI VPA ID for UPI transactions.|
|status|This field contains the status of the transaction.|
|unmappedstatus|This field contains the status of a transaction as per the internal database of PayU. PayU’s system has several intermediate status which are used for tracking various activities internal to the system. Hence, this status contains intermediate statuses of a transaction also – and hence is known as unmappedstatus.For example,&nbsp;dropped,bounced, captured, auth, failed, usercancelled, or pending.|
|Merchant_UTR|This field contains the merchant Unique Transaction Reference (UTR) number.|
|Settled_at|This field contains the time stamp of card settlement if the transaction is using credit cards.|


